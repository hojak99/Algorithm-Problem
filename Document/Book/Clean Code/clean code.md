# Clean Code (클린 코드)

### 서문
책의 내용은 적지 않는다. 어짜피 나중에 다시 이 문서를 읽지 않을 것이라고 생각하고 이 책을 읽고 느낀점과 고칠점, 문제가 됐던 코드 등을 적을 것이다.

> 어느 날, 호작은 프로젝트를 하나 맡아 개발을 하게 되었다. 개발 하는 도중 동료들이 코드 리뷰를 해주면서 많은 코멘트들을 보았고 부족하단 것을 알게 됐다. 그리고 한 분께서 "호작의 코드는 심폐 소생하기 힘들다" 라고 하셔 클린코드 책을 통해 모험을 하게 된다.

---

### ~ 2017.08.01
`99년생 호작` 은 약 2년동안 열심히(나름) 코딩을 갈고 닦았다. 적성에도 잘 맞는 것 같았다. 기술 블로그도 2년동안 나름 열심히 해왔다고 생각했다. 

그렇게 `빈츠`라는 친구와 함께 한 회사 들어가게 된다. 첫 직장이었기에 회사에 들어가기 전 꼭 짱짱 개발자가 되기로 다짐을 했다.

다짐은 부질 없어졌다. 코드는 좆같았고, if 문 안에 있는 코드를 보려면 스크롤 3번은 내려야 했다.

```
if("1".equals(tempObj.getType())) {
  ...
} else if("2".equals(tempObj.getType())) {
  ...
} else if("3".equals(tempObj.getType())) {
  ...
}
```

해당 코드들이 무척 많았다. 하지만 각각 `1`, `2`, `3` 이 뜻하는 바는 문서로도, 주석으로도 존재하지 않았다. 

직접 테스트를 해보고 알아야 했다.

`Spring MVC` 구조였던 해당 프로젝트는 `Service` 클래스의 길이가 몇 천 줄이 되는 클래스가 대부분이었다.

그런 코드들이 굉장히 싫었다. 그리고 신입인 내가 봐도 진짜 뭣같은 코드였다.

그리고 병특 결정을 할 제비뽑기에서 `호작`은 꽝을 골랐고 `빈츠`는 당첨을 골랐다.
그렇게 해서 `호작`은 이 뭣같은 프로젝트가 있는 곳에서 탈출을 하게 된다.

---

### 2018.07.23 ~
`호작`은 간신히 면접에 붙었다. 무척 가고 싶었던 회사였다. `호작` 은 모두는 아니지만 몇몇 분들이 그래도 자기개발을 하면서 성장하는 그런 곳에 가고 싶어했던 것 같다.

`호작`은 면접에서 긴장한 나머지 횡설수설을 굉장히 많이 했다. 필자가 CTO 였으면 뽑지 않았을 것 같다.

회사는 바쁜 시기였기에 `호작` 은 그렇게 입사를 하자마자 프로젝트를 시작하게 되었다.

기간은 2주였는데 처음 해보는 Vue, Spring Cloud, JPA, 아직 알지 못하는 여러 서비스들을 이해해가면서 작업을 했어야 했다. 토이 프로젝트라고 했지만 `호작`은 대충하기는 싫었고, 기간이 늦춰지는 것은 더더욱 싫어했다.

하지만 많이 부족했던 호작은 해당 코드들로 많이 까이게 됐다. 나름 신경써서 개발했는데 까이게 되니 좀 멘탈이 깨지긴 했는데 호작은 더 열심히 해야겠다고 생각했다. 

해당 기간 안에 개발하지 못할까봐 퇴근 후에도 주말에도 틈틈히 개발을 했다. 어찌어찌 개발을 했더니 이제 배포가 남았다. 젠킨스에서 Spring 배포를 하면서 Vue 도 같이 배포를 해야 했는데 처음 젠킨스를 접하기도 했고 웹팩 설정도 처음이었기에 너무 힘들었다. 그래서 다른 프로젝트에 흡수가 됐다.

그리고 원래 해당 프로젝트를 개발하시는 분의 코드를 더럽히기 싫어서 클린코드를 읽게 됐다.

---

### 문제점

우선 문제점은 다음과 같았다.

1. 메소드 안에 코드가 너무 길다.
2. 레이어를 잘 구분해서 코딩을 못함.
3. JPA 에서 제공해주는 기능들을 잘 사용하지 못함.

여기서 제일 컸던 문제는 1번 이였다.

물론 스크롤 넘기는 정도는 아니었다. 하지만 막 집중해서 개발을 하다보면 어느 새 메소드가 길어졌다.

클린 코드에서는 거의 메소드를 잘게 나눠라, 메소드를 작게 해라, 중복되는 코드를 없애라와 같은 내용이 많았다.

중복되는 코드는 없었지만 개발을 하면서 메소드를 잘게 나누지 못 한 것 같다. 그리고 새로운 기능을 개발할 때는 좀 더 나누고, 좀 더 다른 분들이 알기 쉽게 짜도록 노력했다. 메소드 명, 클래스 명도 길더라도 좀 더 알기 쉽게 했다. 

그리고 클린 코드에서 주석은 거짓말을 많이 한다고 나오는데 팩트다. 수정하면 할 수록 주석은 변경하지 않는 것 같다. 그래서 주석은 달지 않았지만 알기 쉽게 짰다. 메소드는 연관이 있는 메소드들끼리 순서대로 구현을 해놓았다.

그리고 메소드 파라미터도 굉장히 줄이거나, 따로 클래스를 만들어서 파라미터로 사용했다. 파라미터가 많아지면 메소드를 이해하기 힘들다. 그래서 따로 클래스를 만들어 관리했다.

추가적으로 예외처리는 Optional.ofNullable() 을 사용하거나 stream 의 OrElseThrow 를 사용해 던지도록 했다.

---

이제 완성이 얼마 남지 않았다. 개발을 하고 코드리뷰를 한 번 하겠지만 많이 까이지 않도록 노력할 것이다. 



